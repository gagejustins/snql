/*!
 * Application Insights JavaScript SDK - Dependencies Plugin, 2.1.1
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights={}))}(this,function(e){"use strict";var a,t,h,n;(t=a||(a={}))[t.LocalStorage=0]="LocalStorage",t[t.SessionStorage=1]="SessionStorage",(n=h||(h={}))[n.Default=0]="Default",n[n.Required=1]="Required",n[n.Array=2]="Array",n[n.Hidden=4]="Hidden";var c=(r.isNullOrUndefined=function(e){return null==e},r.disableCookies=function(){r._canUseCookies=!1},r.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(s,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},r);function r(){}var i,o,s=/[xy]/g;(o=i||(i={}))[o.CRITICAL=1]="CRITICAL",o[o.WARNING=2]="WARNING";var l=1,u=2,d=3,p=4,f=5,g=6,m=13,v=14,x=15,y=16,D=17,S=18,I=49,C=52,N=55,w=56,A=57,_=61,M=66,b=68,T=69;j.prototype.processTelemetry=function(t){this.channelQueue.forEach(function(e){0<e.length&&e[0].processTelemetry(t)})},Object.defineProperty(j.prototype,"ChannelControls",{get:function(){return this.channelQueue},enumerable:!0,configurable:!0}),j.prototype.initialize=function(n,r,a){var i=this;if(n.isCookieUseDisabled&&c.disableCookies(),this.channelQueue=new Array,n.channels){var o=void 0;n.channels.forEach(function(e){if(e&&0<e.length){if((e=e.sort(function(e,t){return e.priority-t.priority})).forEach(function(e){e.priority<500&&(o=e.identifier),e.initialize(n,r,a)}),o)throw Error("Channel has invalid priority"+o);for(var t=1;t<e.length;t++)e[t-1].setNextPlugin(e[t]);i.channelQueue.push(e)}})}for(var e=new Array,t=0;t<a.length;t++){var s=a[t];500<s.priority&&e.push(s)}if(0<e.length){for((e=e.sort(function(e,t){return e.priority-t.priority})).forEach(function(e){return e.initialize(n,r,a)}),t=1;t<e.length;t++)e[t-1].setNextPlugin(e[t]);this.channelQueue.push(e)}};function j(){this.identifier="ChannelControllerPlugin",this.priority=500}var R=(E.requestContextHeader="Request-Context",E.requestContextTargetKey="appId",E.requestContextAppIdFormat="appId=cid-v1:",E.requestIdHeader="Request-Id",E.sdkContextHeader="Sdk-Context",E.sdkContextHeaderAppIdRequest="appId",E.requestContextHeaderLowerCase="request-context",E);function E(){}var U=(q.sanitizeKeyAndAddUniqueness=function(e,t,n){var r=t.length,a=q.sanitizeKey(e,t);if(a.length!==r){for(var i=0,o=a;void 0!==n[o];)i++,o=a.substring(0,q.MAX_NAME_LENGTH-3)+q.padNumber(i);a=o}return a},q.sanitizeKey=function(e,t){var n;return t&&(t=q.trim(t.toString())).length>q.MAX_NAME_LENGTH&&(n=t.substring(0,q.MAX_NAME_LENGTH),e.throwInternal(i.WARNING,A,"name is too long.  It has been truncated to "+q.MAX_NAME_LENGTH+" characters.",{name:t},!0)),n||t},q.sanitizeString=function(e,t,n){var r;return void 0===n&&(n=q.MAX_STRING_LENGTH),t&&(n=n||q.MAX_STRING_LENGTH,(t=q.trim(t)).toString().length>n&&(r=t.toString().substring(0,n),e.throwInternal(i.WARNING,_,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t},q.sanitizeUrl=function(e,t){return q.sanitizeInput(e,t,q.MAX_URL_LENGTH,M)},q.sanitizeMessage=function(e,t){var n;return t&&t.length>q.MAX_MESSAGE_LENGTH&&(n=t.substring(0,q.MAX_MESSAGE_LENGTH),e.throwInternal(i.WARNING,w,"message is too long, it has been truncated to "+q.MAX_MESSAGE_LENGTH+" characters.",{message:t},!0)),n||t},q.sanitizeException=function(e,t){var n;return t&&t.length>q.MAX_EXCEPTION_LENGTH&&(n=t.substring(0,q.MAX_EXCEPTION_LENGTH),e.throwInternal(i.WARNING,C,"exception is too long, it has been truncated to "+q.MAX_EXCEPTION_LENGTH+" characters.",{exception:t},!0)),n||t},q.sanitizeProperties=function(t,e){if(e){var n={};for(var r in e){var a=e[r];if("object"==typeof a&&"undefined"!=typeof JSON)try{a=JSON.stringify(a)}catch(e){t.throwInternal(i.WARNING,I,"custom property is not valid",{exception:e},!0)}a=q.sanitizeString(t,a,q.MAX_PROPERTY_LENGTH),n[r=q.sanitizeKeyAndAddUniqueness(t,r,n)]=a}e=n}return e},q.sanitizeMeasurements=function(e,t){if(t){var n={};for(var r in t){var a=t[r];n[r=q.sanitizeKeyAndAddUniqueness(e,r,n)]=a}t=n}return t},q.sanitizeId=function(e,t){return t?q.sanitizeInput(e,t,q.MAX_ID_LENGTH,T).toString():t},q.sanitizeInput=function(e,t,n,r){var a;return t&&(t=q.trim(t)).length>n&&(a=t.substring(0,n),e.throwInternal(i.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),a||t},q.padNumber=function(e){var t="00"+e;return t.substr(t.length-3)},q.trim=function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")},q.MAX_NAME_LENGTH=150,q.MAX_ID_LENGTH=128,q.MAX_PROPERTY_LENGTH=8192,q.MAX_STRING_LENGTH=1024,q.MAX_URL_LENGTH=2048,q.MAX_MESSAGE_LENGTH=32768,q.MAX_EXCEPTION_LENGTH=32768,q);function q(){}var L=(k.disableStorage=function(){k._canUseLocalStorage=!1,k._canUseSessionStorage=!1},k._getLocalStorageObject=function(){return k.canUseLocalStorage()?k._getVerifiedStorageObject(a.LocalStorage):null},k._getVerifiedStorageObject=function(e){var t,n,r=null;try{if("undefined"==typeof window)return null;n=new Date,(r=e===a.LocalStorage?window.localStorage:window.sessionStorage).setItem(n,n),t=r.getItem(n)!=n,r.removeItem(n),t&&(r=null)}catch(e){r=null}return r},k.isInternalApplicationInsightsEndpoint=function(e){return-1!==k._internalEndpoints.indexOf(e.toLowerCase())},k.canUseLocalStorage=function(){return void 0===k._canUseLocalStorage&&(k._canUseLocalStorage=!!k._getVerifiedStorageObject(a.LocalStorage)),k._canUseLocalStorage},k.getStorage=function(t,e){var n=k._getLocalStorageObject();if(null!==n)try{return n.getItem(e)}catch(e){k._canUseLocalStorage=!1,t.throwInternal(i.WARNING,l,"Browser failed read of local storage. "+k.getExceptionName(e),{exception:k.dump(e)})}return null},k.setStorage=function(t,e,n){var r=k._getLocalStorageObject();if(null!==r)try{return r.setItem(e,n),!0}catch(e){k._canUseLocalStorage=!1,t.throwInternal(i.WARNING,d,"Browser failed write to local storage. "+k.getExceptionName(e),{exception:k.dump(e)})}return!1},k.removeStorage=function(t,e){var n=k._getLocalStorageObject();if(null!==n)try{return n.removeItem(e),!0}catch(e){k._canUseLocalStorage=!1,t.throwInternal(i.WARNING,f,"Browser failed removal of local storage item. "+k.getExceptionName(e),{exception:k.dump(e)})}return!1},k._getSessionStorageObject=function(){return k.canUseSessionStorage()?k._getVerifiedStorageObject(a.SessionStorage):null},k.canUseSessionStorage=function(){return void 0===k._canUseSessionStorage&&(k._canUseSessionStorage=!!k._getVerifiedStorageObject(a.SessionStorage)),k._canUseSessionStorage},k.getSessionStorageKeys=function(){var e=[];if(k.canUseSessionStorage())for(var t in window.sessionStorage)e.push(t);return e},k.getSessionStorage=function(t,e){var n=k._getSessionStorageObject();if(null!==n)try{return n.getItem(e)}catch(e){k._canUseSessionStorage=!1,t.throwInternal(i.WARNING,u,"Browser failed read of session storage. "+k.getExceptionName(e),{exception:k.dump(e)})}return null},k.setSessionStorage=function(t,e,n){var r=k._getSessionStorageObject();if(null!==r)try{return r.setItem(e,n),!0}catch(e){k._canUseSessionStorage=!1,t.throwInternal(i.WARNING,p,"Browser failed write to session storage. "+k.getExceptionName(e),{exception:k.dump(e)})}return!1},k.removeSessionStorage=function(t,e){var n=k._getSessionStorageObject();if(null!==n)try{return n.removeItem(e),!0}catch(e){k._canUseSessionStorage=!1,t.throwInternal(i.WARNING,g,"Browser failed removal of session storage item. "+k.getExceptionName(e),{exception:k.dump(e)})}return!1},k.disableCookies=function(){c.disableCookies()},k.canUseCookies=function(t){if(void 0===c._canUseCookies){c._canUseCookies=!1;try{c._canUseCookies=void 0!==k.document.cookie}catch(e){t.throwInternal(i.WARNING,b,"Cannot access document.cookie - "+k.getExceptionName(e),{exception:k.dump(e)})}}return c._canUseCookies},k.setCookie=function(e,t,n,r){var a="",i="";r&&(a=";domain="+r),k.document.location&&"https:"===k.document.location.protocol&&(i=";secure"),k.canUseCookies(e)&&(k.document.cookie=t+"="+n+a+";path=/"+i)},k.stringToBoolOrDefault=function(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString().toLowerCase()},k.getCookie=function(e,t){if(k.canUseCookies(e)){var n="";if(t&&t.length)for(var r=t+"=",a=k.document.cookie.split(";"),i=0;i<a.length;i++){var o=a[i];if((o=k.trim(o))&&0===o.indexOf(r)){n=o.substring(r.length,a[i].length);break}}return n}},k.deleteCookie=function(e,t){k.canUseCookies(e)&&(k.document.cookie=t+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},k.trim=function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")},k.newId=function(){for(var e="",t=1073741824*Math.random();0<t;)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t%64),t=Math.floor(t/64);return e},k.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},k.isError=function(e){return"[object Error]"===Object.prototype.toString.call(e)},k.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},k.toISOStringForIE8=function(e){if(k.isDate(e)){if(Date.prototype.toISOString)return e.toISOString();var t=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},k.getIEVersion=function(e){void 0===e&&(e=null);var t=e?e.toLowerCase():navigator.userAgent.toLowerCase();return-1!=t.indexOf("msie")?parseInt(t.split("msie")[1]):null},k.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,a=""+Math.floor(e/36e5)%24,i=Math.floor(e/864e5);return t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r,(0<i?i+".":"")+(a=a.length<2?"0"+a:a)+":"+r+":"+n+"."+t},k.isCrossOriginError=function(e,t,n,r,a){return("Script error."===e||"Script error"===e)&&!a},k.dump=function(e){var t=Object.prototype.toString.call(e),n=JSON.stringify(e);return"[object Error]"===t&&(n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'"),t+n},k.getExceptionName=function(e){return"[object Error]"===Object.prototype.toString.call(e)?e.name:""},k.addEventHandler=function(e,t){if("undefined"==typeof window||!window||"string"!=typeof e||"function"!=typeof t)return!1;var n="on"+e;if(window.addEventListener)window.addEventListener(e,t,!1);else{if(!window.attachEvent)return!1;window.attachEvent(n,t)}return!0},k.IsBeaconApiSupported=function(){return"sendBeacon"in navigator&&navigator.sendBeacon},k.getExtension=function(e,t){for(var n=null,r=0;!n&&r<e.length;)e[r]&&e[r].identifier===t&&(n=e[r]),r++;return n},k.document="undefined"!=typeof document?document:{},k._canUseLocalStorage=void 0,k._canUseSessionStorage=void 0,k._internalEndpoints=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],k.NotSpecified="not_specified",k);function k(){}var F=(H.parseUrl=function(e){return H.htmlAnchorElement||(H.htmlAnchorElement=H.document.createElement?H.document.createElement("a"):{host:H.parseHost(e)}),H.htmlAnchorElement.href=e,H.htmlAnchorElement},H.getAbsoluteUrl=function(e){var t,n=H.parseUrl(e);return n&&(t=n.href),t},H.getPathName=function(e){var t,n=H.parseUrl(e);return n&&(t=n.pathname),t},H.getCompleteUrl=function(e,t){return e?e.toUpperCase()+" "+t:t},H.parseHost=function(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&2<t.length&&"string"==typeof t[2]&&0<t[2].length?t[2]:null},H.document="undefined"!=typeof document?document:{},H);function H(){}var O=(z.canIncludeCorrelationHeader=function(e,t,n){if(e&&e.disableCorrelationHeaders)return!1;if(!t)return!1;var r=F.parseUrl(t).host.toLowerCase();if(!(e&&e.enableCorsCorrelation||r===n))return!1;var a,i=e&&e.correlationHeaderDomains;if(i&&(i.forEach(function(e){var t=new RegExp(e.toLowerCase().replace(/\./g,".").replace(/\*/g,".*"));a=a||t.test(r)}),!a))return!1;var o=e&&e.correlationHeaderExcludedDomains;if(!o||0==o.length)return!0;for(var s=0;s<o.length;s++)if(new RegExp(o[s].toLowerCase().replace(/\./g,".").replace(/\*/g,".*")).test(r))return!1;return!0},z.getCorrelationContext=function(e){if(e){var t=z.getCorrelationContextValue(e,R.requestContextTargetKey);if(t&&t!==z.correlationIdPrefix)return t}},z.getCorrelationContextValue=function(e,t){if(e)for(var n=e.split(","),r=0;r<n.length;++r){var a=n[r].split("=");if(2==a.length&&a[0]==t)return a[1]}},z.correlationIdPrefix="cid-v1:",z);function z(){}var G=(P.ParseDependencyPath=function(e,t,n,r){var a,i=r,o=r;if(t&&0<t.length){var s=F.parseUrl(t);if(a=s.host,!i)if(null!=s.pathname){var c=0===s.pathname.length?"/":s.pathname;"/"!==c.charAt(0)&&(c="/"+c),o=s.pathname,i=U.sanitizeString(e,n?n+" "+c:c)}else i=U.sanitizeString(e,t)}else i=a=r;return{target:a,name:i,data:o}},P);function P(){}var X=(W.Now="undefined"==typeof window?function(){return(new Date).getTime()}:window.performance&&window.performance.now&&window.performance.timing?function(){return window.performance.now()+window.performance.timing.navigationStart}:function(){return(new Date).getTime()},W.GetDuration=function(e,t){var n=null;return 0===e||0===t||c.isNullOrUndefined(e)||c.isNullOrUndefined(t)||(n=t-e),n},W);function W(){}var B="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",V=function(e,t){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function K(e,t){function n(){this.constructor=e}V(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Q,J=function(){return(J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Y=(K($,Q=function(){}),$);function $(){return Q.call(this)||this}var Z;K(ee,Z=function(){this.ver=1,this.sampleRate=100,this.tags={}});function ee(e,t,n){var r=Z.call(this)||this;return r.name=U.sanitizeString(e,n)||L.NotSpecified,r.data=t,r.time=L.toISOStringForIE8(new Date),r.aiDataContract={time:h.Required,iKey:h.Required,name:h.Required,sampleRate:function(){return 100==r.sampleRate?h.Hidden:h.Required},tags:h.Required,data:h.Required},r}function te(){}var ne,re=(K(ae,ne=te),ae);function ae(){var e=ne.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var ie;K(oe,ie=re),oe.envelopeType="Microsoft.ApplicationInsights.{0}.Event",oe.dataType="EventData";function oe(e,t,n,r){var a=ie.call(this)||this;return a.aiDataContract={ver:h.Required,name:h.Required,properties:h.Default,measurements:h.Default},a.name=U.sanitizeString(e,t)||L.NotSpecified,a.properties=U.sanitizeProperties(e,n),a.measurements=U.sanitizeMeasurements(e,r),a}function se(){}var ce,le=(K(ue,ce=te),ue);function ue(){var e=ce.call(this)||this;return e.ver=2,e.exceptions=[],e.properties={},e.measurements={},e}function de(){this.hasFullStack=!0,this.parsedStack=[]}var pe;K(he,pe=le),he.CreateFromInterface=function(t,e){var n=e.exceptions&&e.exceptions.map(function(e){return ge.CreateFromInterface(t,e)});return new he(t,J({},e,{exceptions:n}))},he.prototype.toInterface=function(){var e=this,t=e.exceptions,n=e.properties,r=e.measurements,a=e.severityLevel,i=e.ver,o=e.problemGroup,s=e.id,c=e.isManual;return{ver:i,exceptions:t instanceof Array&&t.map(function(e){return e.toInterface()})||void 0,severityLevel:a,properties:n,measurements:r,problemGroup:o,id:s,isManual:c}},he.CreateSimpleException=function(e,t,n,r,a,i){return{exceptions:[{hasFullStack:!0,message:e,stack:a,typeName:t}]}},he.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",he.dataType="ExceptionData";function he(e,t,n,r,a,i){var o=pe.call(this)||this;return o.aiDataContract={ver:h.Required,exceptions:h.Required,severityLevel:h.Default,properties:h.Default,measurements:h.Default},t instanceof Error?(o.exceptions=[new ge(e,t)],o.properties=U.sanitizeProperties(e,n),o.measurements=U.sanitizeMeasurements(e,r),a&&(o.severityLevel=a),i&&(o.id=i)):(o.exceptions=t.exceptions,o.properties=t.properties,o.measurements=t.measurements,t.severityLevel&&(o.severityLevel=t.severityLevel),t.id&&(o.id=t.id),t.problemGroup&&(o.problemGroup=t.problemGroup),c.isNullOrUndefined(t.ver)||(o.ver=t.ver),c.isNullOrUndefined(t.isManual)||(o.isManual=t.isManual)),o}var fe,ge=(K(me,fe=de),me.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&this.parsedStack.map(function(e){return e.toInterface()});return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this.stack,parsedStack:e||void 0}},me.CreateFromInterface=function(e,t){var n=t.parsedStack instanceof Array&&t.parsedStack.map(function(e){return xe.CreateFromInterface(e)})||t.parsedStack;return new me(e,J({},t,{parsedStack:n}))},me.parseStack=function(e){var t=void 0;if("string"==typeof e){var n=e.split("\n");t=[];for(var r=0,a=0,i=0;i<=n.length;i++){var o=n[i];if(xe.regex.test(o)){var s=new xe(n[i],r++);a+=s.sizeInBytes,t.push(s)}}if(32768<a)for(var c=0,l=t.length-1,u=0,d=c,p=l;c<l;){if(32768<(u+=t[c].sizeInBytes+t[l].sizeInBytes)){var h=p-d+1;t.splice(d,h);break}d=c,p=l,c++,l--}}return t},me);function me(e,t){var n=fe.call(this)||this;if(n.aiDataContract={id:h.Default,outerId:h.Default,typeName:h.Required,message:h.Required,hasFullStack:h.Default,stack:h.Default,parsedStack:h.Array},t instanceof Error){n.typeName=U.sanitizeString(e,t.name)||L.NotSpecified,n.message=U.sanitizeMessage(e,t.message)||L.NotSpecified;var r=t.stack;n.parsedStack=me.parseStack(r),n.stack=U.sanitizeException(e,r),n.hasFullStack=L.isArray(n.parsedStack)&&0<n.parsedStack.length}else n.typeName=t.typeName,n.message=t.message,n.stack=t.stack,n.parsedStack=t.parsedStack,n.hasFullStack=t.hasFullStack;return n}var ve,xe=(K(ye,ve=se),ye.CreateFromInterface=function(e){return new ye(e,null)},ye.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},ye.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,ye.baseSize=58,ye);function ye(e,t){var n=ve.call(this)||this;if(n.sizeInBytes=0,n.aiDataContract={level:h.Required,method:h.Required,assembly:h.Default,fileName:h.Default,line:h.Default},"string"==typeof e){var r=e;n.level=t,n.method="<no_method>",n.assembly=L.trim(r),n.fileName="",n.line=0;var a=r.match(ye.regex);a&&5<=a.length&&(n.method=L.trim(a[2])||n.method,n.fileName=L.trim(a[4]),n.line=parseInt(a[5])||0)}else n.level=e.level,n.method=e.method,n.assembly=e.assembly,n.fileName=e.fileName,n.line=e.line,n.sizeInBytes=0;return n.sizeInBytes+=n.method.length,n.sizeInBytes+=n.fileName.length,n.sizeInBytes+=n.assembly.length,n.sizeInBytes+=ye.baseSize,n.sizeInBytes+=n.level.toString().length,n.sizeInBytes+=n.line.toString().length,n}var De,Se,Ie,Ce=(K(Ne,De=te),Ne);function Ne(){var e=De.call(this)||this;return e.ver=2,e.metrics=[],e.properties={},e}(Ie=Se||(Se={}))[Ie.Measurement=0]="Measurement",Ie[Ie.Aggregation=1]="Aggregation";var we,Ae=(K(_e,we=function(){this.kind=Se.Measurement}),_e);function _e(){var e=null!==we&&we.apply(this,arguments)||this;return e.aiDataContract={name:h.Required,kind:h.Default,value:h.Required,count:h.Default,min:h.Default,max:h.Default,stdDev:h.Default},e}var Me;K(be,Me=Ce),be.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",be.dataType="MetricData";function be(e,t,n,r,a,i,o){var s=Me.call(this)||this;s.aiDataContract={ver:h.Required,metrics:h.Required,properties:h.Default};var c=new Ae;return c.count=0<r?r:void 0,c.max=isNaN(i)||null===i?void 0:i,c.min=isNaN(a)||null===a?void 0:a,c.name=U.sanitizeString(e,t)||L.NotSpecified,c.value=n,s.metrics=[c],s.properties=U.sanitizeProperties(e,o),s}var Te,je=(K(Re,Te=re),Re);function Re(){var e=Te.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Ee;K(Ue,Ee=je),Ue.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",Ue.dataType="PageviewData";function Ue(e,t,n,r,a,i,o){var s=Ee.call(this)||this;return s.aiDataContract={ver:h.Required,name:h.Default,url:h.Default,duration:h.Default,properties:h.Default,measurements:h.Default,id:h.Default},s.id=U.sanitizeId(e,o),s.url=U.sanitizeUrl(e,n),s.name=U.sanitizeString(e,t)||L.NotSpecified,isNaN(r)||(s.duration=L.msToTimeSpan(r)),s.properties=U.sanitizeProperties(e,a),s.measurements=U.sanitizeMeasurements(e,i),s}var qe,Le=(K(ke,qe=te),ke);function ke(){var e=qe.call(this)||this;return e.ver=2,e.success=!0,e.properties={},e.measurements={},e}var Fe,He=(K(Oe,Fe=Le),Oe.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",Oe.dataType="RemoteDependencyData",Oe);function Oe(e,t,n,r,a,i,o,s,c,l,u){void 0===c&&(c="Ajax");var d=Fe.call(this)||this;d.aiDataContract={id:h.Required,ver:h.Required,name:h.Default,resultCode:h.Default,duration:h.Default,success:h.Default,data:h.Default,target:h.Default,type:h.Default,properties:h.Default,measurements:h.Default,kind:h.Default,value:h.Default,count:h.Default,min:h.Default,max:h.Default,stdDev:h.Default,dependencyKind:h.Default,dependencySource:h.Default,commandName:h.Default,dependencyTypeName:h.Default},d.id=t,d.duration=L.msToTimeSpan(a),d.success=i,d.resultCode=o+"",d.type=U.sanitizeString(e,c);var p=G.ParseDependencyPath(e,n,s,r);return d.data=U.sanitizeUrl(e,r)||p.data,d.target=U.sanitizeString(e,p.target),d.name=U.sanitizeString(e,p.name),d.properties=U.sanitizeProperties(e,l),d.measurements=U.sanitizeMeasurements(e,u),d}var ze,Ge=(K(Pe,ze=te),Pe);function Pe(){var e=ze.call(this)||this;return e.ver=2,e.properties={},e}var Xe;K(We,Xe=Ge),We.envelopeType="Microsoft.ApplicationInsights.{0}.Message",We.dataType="MessageData";function We(e,t,n,r){var a=Xe.call(this)||this;return a.aiDataContract={ver:h.Required,message:h.Required,severityLevel:h.Default,properties:h.Default},t=t||L.NotSpecified,a.message=U.sanitizeMessage(e,t),a.properties=U.sanitizeProperties(e,r),n&&(a.severityLevel=n),a}var Be,Ve=(K(Ke,Be=je),Ke);function Ke(){var e=Be.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Qe;K(Je,Qe=Ve),Je.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",Je.dataType="PageviewPerformanceData";function Je(e,t,n,r,a,i,o){var s=Qe.call(this)||this;return s.aiDataContract={ver:h.Required,name:h.Default,url:h.Default,duration:h.Default,perfTotal:h.Default,networkConnect:h.Default,sentRequest:h.Default,receivedResponse:h.Default,domProcessing:h.Default,properties:h.Default,measurements:h.Default},s.url=U.sanitizeUrl(e,n),s.name=U.sanitizeString(e,t)||L.NotSpecified,s.properties=U.sanitizeProperties(e,a),s.measurements=U.sanitizeMeasurements(e,i),o&&(s.domProcessing=o.domProcessing,s.duration=o.duration,s.networkConnect=o.networkConnect,s.perfTotal=o.perfTotal,s.receivedResponse=o.receivedResponse,s.sentRequest=o.sentRequest),s}var Ye,$e,Ze;K(et,Ye=Y);function et(e,t){var n=Ye.call(this)||this;return n.aiDataContract={baseType:h.Required,baseData:h.Required},n.baseType=e,n.baseData=t,n}(Ze=$e||($e={}))[Ze.Verbose=0]="Verbose",Ze[Ze.Information=1]="Information",Ze[Ze.Warning=2]="Warning",Ze[Ze.Error=3]="Error",Ze[Ze.Critical=4]="Critical";var tt=(nt.getConfig=function(e,t,n,r){var a;return void 0===r&&(r=!1),a=n&&e.extensionConfig&&e.extensionConfig[n]&&!c.isNullOrUndefined(e.extensionConfig[n][t])?e.extensionConfig[n][t]:e[t],c.isNullOrUndefined(a)?r:a},nt);function nt(){}var rt=(at.create=function(e,t,n,r,a,i){if(n=U.sanitizeString(r,n)||L.NotSpecified,c.isNullOrUndefined(e)||c.isNullOrUndefined(t)||c.isNullOrUndefined(n))throw Error("Input doesn't contain all required fields");var o={name:n,time:(new Date).toISOString(),iKey:"",ext:i||{},tags:[],data:{},baseType:t,baseData:e};if(!c.isNullOrUndefined(a))for(var s in a)a.hasOwnProperty(s)&&(o.data[s]=a[s]);return o},at);function at(){}var it=function(){this.openDone=!1,this.setRequestHeaderDone=!1,this.sendDone=!1,this.abortDone=!1,this.onreadystatechangeCallbackAttached=!1},ot=(st.prototype.getAbsoluteUrl=function(){return this.requestUrl?F.getAbsoluteUrl(this.requestUrl):null},st.prototype.getPathName=function(){return this.requestUrl?U.sanitizeUrl(this._logger,F.getCompleteUrl(this.method,this.requestUrl)):null},st);function st(e,t){this.completed=!1,this.requestHeadersSize=null,this.ttfb=null,this.responseReceivingDuration=null,this.callbackDuration=null,this.ajaxTotalDuration=null,this.aborted=null,this.pageUrl=null,this.requestUrl=null,this.requestSize=0,this.method=null,this.status=null,this.requestSentTime=null,this.responseStartedTime=null,this.responseFinishedTime=null,this.callbackFinishedTime=null,this.endTime=null,this.originalOnreadystatechage=null,this.xhrMonitoringState=new it,this.clientFailure=0,this.CalculateMetrics=function(){this.ajaxTotalDuration=Math.round(1e3*X.GetDuration(this.requestSentTime,this.responseFinishedTime))/1e3},this.id=e,this._logger=t}var ct=(lt.AttachEvent=function(e,t,n){var r=!1;return c.isNullOrUndefined(e)||(c.isNullOrUndefined(e.attachEvent)?c.isNullOrUndefined(e.addEventListener)||(e.addEventListener(t,n,!1),r=!0):(e.attachEvent("on"+t,n),r=!0)),r},lt.DetachEvent=function(e,t,n){c.isNullOrUndefined(e)||(c.isNullOrUndefined(e.detachEvent)?c.isNullOrUndefined(e.removeEventListener)||e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n))},lt);function lt(){}var ut=(dt.prototype.isMonitoredInstance=function(e,t,n,r){var a=!1,i=!0,o=!1;return void 0!==n?(o=this._fetchInitialized,a="object"==typeof n&&!0===n[B]||!!r&&!0===r[B]):void 0!==e&&(o=this.initialized,a=!0===e[B],i=!0===t||!c.isNullOrUndefined(e.ajaxData)),o&&i&&!a},dt.prototype.supportsAjaxMonitoring=function(){var e=!0;return(c.isNullOrUndefined(XMLHttpRequest)||c.isNullOrUndefined(XMLHttpRequest.prototype)||c.isNullOrUndefined(XMLHttpRequest.prototype.open)||c.isNullOrUndefined(XMLHttpRequest.prototype.send)||c.isNullOrUndefined(XMLHttpRequest.prototype.abort))&&(e=!1),e},dt.prototype.instrumentOpen=function(){var r=XMLHttpRequest.prototype.open,a=this;XMLHttpRequest.prototype.open=function(e,t,n){try{!a.isMonitoredInstance(this,!0)||this.ajaxData&&this.ajaxData.xhrMonitoringState.openDone||a.openHandler(this,e,t,n)}catch(e){a._core.logger.throwInternal(i.CRITICAL,x,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:dt.getFailedAjaxDiagnosticsMessage(this),exception:L.dump(e)})}return r.apply(this,arguments)}},dt.prototype.openHandler=function(e,t,n,r){var a;a=this._context&&this._context.telemetryTrace&&this._context.telemetryTrace.traceID?"|"+this._context.telemetryTrace.traceID+"."+L.newId():L.newId();var i=new ot(a,this._core.logger);i.method=t,i.requestUrl=n,i.xhrMonitoringState.openDone=!0,e.ajaxData=i,this.attachToOnReadyStateChange(e)},dt.getFailedAjaxDiagnosticsMessage=function(e){var t="";try{c.isNullOrUndefined(e)||c.isNullOrUndefined(e.ajaxData)||c.isNullOrUndefined(e.ajaxData.requestUrl)||(t+="(url: '"+e.ajaxData.requestUrl+"')")}catch(e){}return t},dt.prototype.instrumentSend=function(){var t=XMLHttpRequest.prototype.send,n=this;XMLHttpRequest.prototype.send=function(e){try{n.isMonitoredInstance(this)&&!this.ajaxData.xhrMonitoringState.sendDone&&n.sendHandler(this,e)}catch(e){n._core.logger.throwInternal(i.CRITICAL,D,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:dt.getFailedAjaxDiagnosticsMessage(this),exception:L.dump(e)})}return t.apply(this,arguments)}},dt.prototype.sendHandler=function(e,t){e.ajaxData.requestSentTime=X.Now(),(e=this.includeCorrelationHeaders(e.ajaxData,void 0,void 0,e)).ajaxData.xhrMonitoringState.sendDone=!0},dt.prototype.instrumentAbort=function(){var e=XMLHttpRequest.prototype.abort,t=this;XMLHttpRequest.prototype.abort=function(){try{t.isMonitoredInstance(this)&&!this.ajaxData.xhrMonitoringState.abortDone&&(this.ajaxData.aborted=1,this.ajaxData.xhrMonitoringState.abortDone=!0)}catch(e){t._core.logger.throwInternal(i.CRITICAL,m,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:dt.getFailedAjaxDiagnosticsMessage(this),exception:L.dump(e)})}return e.apply(this,arguments)}},dt.prototype.attachToOnReadyStateChange=function(n){var r=this;n.ajaxData.xhrMonitoringState.onreadystatechangeCallbackAttached=ct.AttachEvent(n,"readystatechange",function(){try{r.isMonitoredInstance(n)&&4===n.readyState&&r.onAjaxComplete(n)}catch(e){var t=L.dump(e);t&&-1!=t.toLowerCase().indexOf("c00c023f")||r._core.logger.throwInternal(i.CRITICAL,y,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:dt.getFailedAjaxDiagnosticsMessage(n),exception:L.dump(e)})}})},dt.prototype.onAjaxComplete=function(e){if(e.ajaxData.responseFinishedTime=X.Now(),e.ajaxData.status=e.status,e.ajaxData.CalculateMetrics(),e.ajaxData.ajaxTotalDuration<0)this._core.logger.throwInternal(i.WARNING,v,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",{ajaxDiagnosticsMessage:dt.getFailedAjaxDiagnosticsMessage(e),requestSentTime:e.ajaxData.requestSentTime,responseFinishedTime:e.ajaxData.responseFinishedTime});else{var t={id:e.ajaxData.id,target:e.ajaxData.getAbsoluteUrl(),name:e.ajaxData.getPathName(),type:"Ajax",duration:e.ajaxData.ajaxTotalDuration,success:200<=+e.ajaxData.status&&+e.ajaxData.status<400,responseCode:+e.ajaxData.status,method:e.ajaxData.method},n=this.getAjaxCorrelationContext(e);n&&(t.correlationContext=n),this.trackDependencyDataInternal(t),e.ajaxData=null}},dt.prototype.getAjaxCorrelationContext=function(t){try{var e=t.getAllResponseHeaders();if(null!==e&&-1!==e.toLowerCase().indexOf(R.requestContextHeaderLowerCase)){var n=t.getResponseHeader(R.requestContextHeader);return O.getCorrelationContext(n)}}catch(e){this._core.logger.throwInternal(i.WARNING,S,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:dt.getFailedAjaxDiagnosticsMessage(t),exception:L.dump(e)})}},dt.prototype.trackDependencyDataInternal=function(e,t,n){if(-1===this._config.maxAjaxCallsPerView||this._trackAjaxAttempts<this._config.maxAjaxCallsPerView){var r=rt.create(e,He.dataType,He.envelopeType,this._core.logger,t,n);this._core.track(r)}else this._trackAjaxAttempts===this._config.maxAjaxCallsPerView&&this._core.logger.throwInternal(i.CRITICAL,N,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++this._trackAjaxAttempts},dt.prototype.trackDependencyData=function(e,t){this.trackDependencyDataInternal(e,t)},dt.prototype.processTelemetry=function(e){this._nextPlugin&&this._nextPlugin.processTelemetry&&this._nextPlugin.processTelemetry(e)},dt.prototype.setNextPlugin=function(e){e&&(this._nextPlugin=e)},dt.prototype.instrumentFetch=function(){if(this.supportsFetch()&&!this._fetchInitialized){var r=window.fetch,a=this;window.fetch=function(t,e){var n;if(a.isFetchInstrumented(t)&&a.isMonitoredInstance(void 0,void 0,t,e))try{n=a.createFetchRecord(t,e),e=a.includeCorrelationHeaders(n,t,e)}catch(e){a._core.logger.throwInternal(i.CRITICAL,x,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.",{ajaxDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),exception:L.dump(e)})}return r(t,e).then(function(e){return a.onFetchComplete(e,n),e}).catch(function(e){throw a.onFetchFailed(t,n,e),e})},this._fetchInitialized=!0}},dt.prototype.isFetchInstrumented=function(e){return this._fetchInitialized&&!0!==e[B]},dt.prototype.supportsFetch=function(){var e=!0;return(!window||c.isNullOrUndefined(window.Request)||c.isNullOrUndefined(window.Request.prototype)||c.isNullOrUndefined(window.fetch))&&(e=!1),e},dt.prototype.createFetchRecord=function(e,t){var n;n=this._context&&this._context.telemetryTrace&&this._context.telemetryTrace.traceID?"|"+this._context.telemetryTrace.traceID+"."+L.newId():L.newId();var r=new ot(n,this._core.logger);return r.requestSentTime=X.Now(),e instanceof Request?r.requestUrl=e?e.url:"":r.requestUrl=e,t&&t.method?r.method=t.method:e&&e instanceof Request?r.method=e.method:r.method="GET",r},dt.prototype.includeCorrelationHeaders=function(e,t,n,r){if(t){if(O.canIncludeCorrelationHeader(this._config,e.getAbsoluteUrl(),this.currentWindowHost)){n||(n={}),n.headers=new Headers(n.headers||t instanceof Request&&t.headers||{}),n.headers.set(R.requestIdHeader,e.id);var a=this._config.appId||this._context.appId();return a&&n.headers.set(R.requestContextHeader,R.requestContextAppIdFormat+a),n}return n}if(r){if(this.currentWindowHost&&O.canIncludeCorrelationHeader(this._config,r.ajaxData.getAbsoluteUrl(),this.currentWindowHost)){r.setRequestHeader(R.requestIdHeader,r.ajaxData.id);var i=this._config.appId||this._context.appId();i&&r.setRequestHeader(R.requestContextHeader,R.requestContextAppIdFormat+i)}return r}},dt.prototype.getFailedFetchDiagnosticsMessage=function(e){var t="";try{c.isNullOrUndefined(e)||(t+="string"==typeof e?"(url: '"+e+"')":"(url: '"+e.url+"')")}catch(e){this._core.logger.throwInternal(i.CRITICAL,x,"Failed to grab failed fetch diagnostics message",{exception:L.dump(e)})}return t},dt.prototype.onFetchComplete=function(t,e){if(e)try{if(e.responseFinishedTime=X.Now(),e.CalculateMetrics(),e.ajaxTotalDuration<0)this._core.logger.throwInternal(i.WARNING,v,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),requestSentTime:e.requestSentTime,responseFinishedTime:e.responseFinishedTime});else{var n={id:e.id,target:e.getAbsoluteUrl(),name:e.getPathName(),type:"Fetch",duration:e.ajaxTotalDuration,success:200<=t.status&&t.status<400,responseCode:t.status,properties:{HttpMethod:e.method}},r=this.getFetchCorrelationContext(t);r&&(n.correlationContext=r),this.trackDependencyDataInternal(n)}}catch(e){this._core.logger.throwInternal(i.WARNING,S,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),exception:L.dump(e)})}},dt.prototype.onFetchFailed=function(t,e,n){if(e)try{if(e.responseFinishedTime=X.Now(),e.CalculateMetrics(),e.ajaxTotalDuration<0)this._core.logger.throwInternal(i.WARNING,v,"Failed to calculate the duration of the failed fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),requestSentTime:e.requestSentTime,responseFinishedTime:e.responseFinishedTime});else{var r={id:e.id,target:e.getAbsoluteUrl(),name:e.getPathName(),type:"Fetch",duration:e.ajaxTotalDuration,success:!1,responseCode:0,properties:{HttpMethod:e.method}};this.trackDependencyDataInternal(r,{error:n.message})}}catch(e){this._core.logger.throwInternal(i.WARNING,S,"Failed to calculate the duration of the failed fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),exception:L.dump(e)})}},dt.prototype.getFetchCorrelationContext=function(t){try{var e=t.headers.get(R.requestContextHeader);return O.getCorrelationContext(e)}catch(e){this._core.logger.throwInternal(i.WARNING,S,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(t),exception:L.dump(e)})}},dt.prototype.instrumentXhr=function(){this.supportsAjaxMonitoring()&&!this.initialized&&(this.instrumentOpen(),this.instrumentSend(),this.instrumentAbort(),this.initialized=!0)},dt.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,disableCorrelationHeaders:!1,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,appId:void 0,enableCorsCorrelation:!1}},dt.getEmptyConfig=function(){return{maxAjaxCallsPerView:void 0,disableAjaxTracking:void 0,disableFetchTracking:void 0,disableCorrelationHeaders:void 0,correlationHeaderExcludedDomains:void 0,appId:void 0,enableCorsCorrelation:void 0,correlationHeaderDomains:void 0}},dt.prototype.initialize=function(e,t,n){if(!this.initialized&&!this._fetchInitialized){this._core=t;var r=dt.getDefaultConfig();for(var a in this._config=dt.getEmptyConfig(),r)this._config[a]=tt.getConfig(e,a,dt.identifier,r[a]);if(!1===this._config.disableAjaxTracking&&this.instrumentXhr(),!1===this._config.disableFetchTracking&&this.instrumentFetch(),0<n.length&&n){for(var i=void 0,o=0;!i&&o<n.length;)n[o]&&"AppInsightsPropertiesPlugin"===n[o].identifier&&(i=n[o]),o++;i&&(this._context=i.context)}}},dt.identifier="AjaxDependencyPlugin",dt);function dt(){this._trackAjaxAttempts=0,this.identifier=dt.identifier,this.priority=120,this.currentWindowHost=window&&window.location&&window.location.host&&window.location.host.toLowerCase(),this.initialized=!1,this._fetchInitialized=!1}e.AjaxPlugin=ut,e.ajaxRecord=ot,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=applicationinsights-dependencies-js.min.js.map
